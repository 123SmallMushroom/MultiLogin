import org.apache.tools.ant.filters.ReplaceTokens

plugins {
    id 'java'
}

java {
    sourceCompatibility = JavaVersion.VERSION_11
    targetCompatibility = JavaVersion.VERSION_11
}

repositories {
    mavenCentral()
    maven { url "https://maven.aliyun.com/repository/public" }
    maven { url "https://nexus.velocitypowered.com/repository/maven-public" }
}

dependencies {
    compile project(':core')
    compileOnly 'com.velocitypowered:velocity-api:3.0.0'
    compileOnly "io.netty:netty-all:4.1.25.Final"
    annotationProcessor 'com.velocitypowered:velocity-api:3.0.0'
    compileOnly fileTree(dir: 'libraries', include: ['*.jar'])
}

processResources {
    from(sourceSets.main.resources.srcDirs) {
        filter ReplaceTokens, tokens: [version: project.plugin_version]
    }
}

jar {
    archiveBaseName.set "MultiLogin-Velocity-" + project.plugin_version
    from {
        configurations.compile.collect {
            it.isDirectory() ? it : zipTree(it)
        }
    }
}